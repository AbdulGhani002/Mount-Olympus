<html>
    <head>
        <title>Direct Messaging</title>
        <link rel="stylesheet" href="/styles/main.css">
        <link rel="stylesheet" href="/styles/direct_messages_chat.css">
    </head>
    <body>
        <%- include('nav', { activePage: 'direct_messages' }) %>
        <noscript>
            <h3>Hello. You've got javascript disabled. However, for the E2E aspect of direct messaging here, you'll need to enable javascript.</h3>
            <h4>If javascript was disabled, the contents of your messages would be submitted to the server in plaintext (over HTTPS). I don't log/record/look at messages, and don't want to. </h4>
            <h4>first of all, you shouldn't trust me about that. trust no one. second, However, in the unlikely case that someone unauthorized gains access to the server, they could log messages and keep track of you.</h4>
            <h5>(There are measures implemented to prevent unauthorized visitors from accessing valueable database information). <a href="/security">More information</a></h5>
        </noscript>
        <section id="main">
            <p id="receiver_id" hidden><%= receiver_id %></p>
            <!-- No, <%= sender_username %>, obviously this isn't the only way I'll know who you are. Dont try editing it. -->
            <p id="sender_id" hidden><%= sender_id %></p>
            <h1>Direct messaging with <%= receiver_id %></h1>
            <a href="/chathelp">INSTRUCTIONS</a>
            <textarea id="his_public_key" placeholder="PLACE OTHER USER'S PUBLIC KEY HERE"><%= receiver_public_key ? receiver_public_key : "" %></textarea>
            <textarea id="my_public_key" placeholder="PLACE YOUR PUBLIC KEY HERE"><%= sender_public_key ? sender_public_key : "" %></textarea>
            <textarea id="my_private_key" placeholder="PLACE YOUR PRIVATE KEY HERE"></textarea>
            <br>
            <button id="initialize">Connect!</button>
            <br>
            <br>
            <div id="messages"></div>
            <br>
            <input id="input" placeholder="Type messages here. If you're here to leave feedback, please send your email or another way to get back to you.">
            <button id="sendMessage">Send message</button>
        </section>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jsencrypt/3.0.0/jsencrypt.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script src="/scripts/chat.js" integrity="sha384-IQ2XTD8ldLmml4LJnXM5rPyUkyp9G278AA2xPfqJV2BMvwditaii9wkOZ2qvXHbU"></script>
    </body>
</html>'
